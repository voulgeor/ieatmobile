import{_ as w,m as V,a1 as U,bj as T,a2 as y,n as g,p as A,q as l,S as b,k as e,u as t,a9 as v,F as $,V as s,ab as i,X as r,R as _,b4 as B,ae as D,af as N,aj as d,t as n,b3 as o,a3 as u,as as c,bg as q,U as I,ad as Q,v as L,ar as f}from"./index.e1f31b72.js";import{Q as F}from"./QToolbarTitle.7746a5f3.js";import{Q as z}from"./QToolbar.9ad6ac15.js";import{Q as M}from"./QHeader.26bcd033.js";import{Q as E}from"./QImg.032a5332.js";import{Q as x}from"./QSpace.5710b96a.js";import{Q as O}from"./QList.20d5a18b.js";import{Q as j}from"./QPage.0ee62e2e.js";import{u as R}from"./ClientStore.22f8f03e.js";import{S as H}from"./index.abaeff4d.js";import"./QResizeObserver.66815ae3.js";const Y={name:"AccountMenu",components:{NotiButton:V(()=>L(()=>import("./NotiButton.9986f33d.js"),["assets/NotiButton.9986f33d.js","assets/index.e1f31b72.js","assets/index.469535cd.css","assets/QBadge.0cd81778.js"]))},data(){return{data:[],theme_mode:!1,app_push_notifications:!1,promotional_push_notifications:!1,user_settings:{}}},setup(){const a=U(),m=T(),S=R();return{DataStore:a,DataStorePersisted:m,ClientStore:S}},watch:{theme_mode(a,m){this.$q.dark.set(a),this.DataStorePersisted.dark_mode=a}},created(){this.data=y.getUser(),this.authenticate(),this.theme_mode=this.DataStorePersisted.dark_mode,this.$q.dark.set(this.theme_mode),this.app_push_notifications=this.ClientStore.user_settings.app_push_notifications==1,this.promotional_push_notifications=this.ClientStore.user_settings.promotional_push_notifications==1},methods:{authenticate(){y.authenticate().then(a=>{}).catch(a=>{g.notify("dark",a,"error",this.$q),y.logout(),this.$router.push("/user/login")}).then(a=>{})},logout(){this.$q.dialog({title:this.$t("Logout"),message:this.$t("Are you sure you want to logout?"),persistent:!0,position:"standard",transitionShow:"fade",transitionHide:"fade",ok:{unelevated:!0,color:"primary",rounded:!1,"text-color":"white",size:"md",label:this.$t("Yes"),"no-caps":!0},cancel:{unelevated:!0,rounded:!1,color:"grey-3","text-color":"black",size:"md",label:this.$t("Cancel"),"no-caps":!0}}).onOk(()=>{y.logout(),this.ClientStore.user_settings=[],this.$router.push("/home")}).onOk(()=>{}).onCancel(()=>{}).onDismiss(()=>{})},Updateaccountnotification(){g.fetchDataByTokenPost("Updateaccountnotification","app_push_notifications="+this.app_push_notifications).then(a=>{this.ClientStore.user_settings.app_push_notifications=a.details.app_push_notifications}).catch(a=>{}).then(a=>{})},Updateaccountpromonotification(){g.fetchDataByTokenPost("Updateaccountpromonotification","promotional_push_notifications="+this.promotional_push_notifications).then(a=>{this.ClientStore.user_settings.promotional_push_notifications=a.details.promotional_push_notifications}).catch(a=>{}).then(a=>{})},inviteFriends(){this.$q.capacitor?H.share({title:this.$t(this.DataStore.invite_friend_settings.title),text:this.$t("Check this app")+" - "+this.DataStore.invite_friend_settings.site_url+". "+this.$t("I use this app to order food from different restaurants. Try them:"),url:this.DataStore.invite_friend_settings.url,dialogTitle:""}).then(a=>{}).catch(a=>{}):navigator.share?navigator.share({title:this.$t(this.DataStore.invite_friend_settings.title),text:this.DataStore.invite_friend_settings.text,url:this.DataStore.invite_friend_settings.url}).then(()=>console.log("Successful share")).catch(a=>console.log("Error sharing",a)):this.$q.capacitor?g.showToast(this.$t("Share not supported")):g.notify("dark",this.$t("Share not supported"),"error",this.$q)}}},X={class:"row items-center"},G={class:"col-3"},J={class:"col"},K={class:"text-weight-bold q-ma-none"},W={class:"text-weight-medium q-ma-none"},Z={class:"row items-center q-gutter-sm"},ee={class:"col text-center"},te={class:"col text-center"},ae={class:"col text-center"};function oe(a,m,S,C,h,k){const P=A("NotiButton");return l(),b($,null,[e(M,{reveal:"","reveal-offset":"50",class:v({"bg-transparent text-white":a.$q.dark.mode,"bg-grey-1 text-dark":!a.$q.dark.mode})},{default:t(()=>[e(z,null,{default:t(()=>[e(s,{to:"/home",flat:"",round:"",dense:"",icon:"las la-angle-left",class:"q-mr-sm","text-color":a.$q.dark.mode?"white":"dark"},null,8,["text-color"]),e(F,{class:"text-weight-bold"},{default:t(()=>[i(r(a.$t("Profile")),1)]),_:1}),e(P)]),_:1})]),_:1},8,["class"]),e(j,{padding:"",class:v(["q-pa-md",{"bg-transparent":a.$q.dark.mode,"bg-grey-1":!a.$q.dark.mode}])},{default:t(()=>[_("div",X,[_("div",G,[e(B,null,{default:t(()=>[e(E,{src:h.data.avatar,lazy:"",style:{height:"50px","max-width":"50px"},"spinner-color":"secondary","spinner-size":"20px"},null,8,["src"])]),_:1})]),_("div",J,[_("h5",K,r(h.data.first_name)+" "+r(h.data.last_name),1),_("p",W,r(h.data.email_address),1)])]),e(x,{class:"q-pa-sm"}),e(D,{flat:"",class:v(["radius8",{"bg-grey500":a.$q.dark.mode,"bg-white":!a.$q.dark.mode}])},{default:t(()=>[e(N,null,{default:t(()=>[_("div",Z,[_("div",ee,[e(s,{to:"/account/allorder",round:"",color:"secondary",icon:"las la-truck",dense:"",flat:""}),e(s,{to:"/account/allorder",flat:"","no-caps":"",label:a.$t("My All orders"),class:"line-height-one q-pa-none","text-color":a.$q.dark.mode?"bluegrey500":"dark"},null,8,["label","text-color"])]),_("div",te,[e(s,{to:{path:"feed",query:{query:"promo",page_title:"Promo"}},round:"",color:"primary",icon:"las la-percentage",dense:"",flat:""}),e(s,{flat:"","no-caps":"",label:a.$t("Offers & Coupons"),class:"line-height-one q-pa-none",to:{path:"feed",query:{query:"promo",page_title:"Promo"}},"text-color":a.$q.dark.mode?"bluegrey500":"dark"},null,8,["label","text-color"])]),_("div",ae,[e(s,{round:"",color:"yellow-5",icon:"las la-map-marker",dense:"",flat:"",to:"/account/my-address"}),e(s,{to:"/account/my-address",flat:"","no-caps":"",label:a.$t("Your Addresses"),class:"line-height-one q-pa-none","text-color":a.$q.dark.mode?"bluegrey500":"dark"},null,8,["label","text-color"])])])]),_:1})]),_:1},8,["class"]),e(x,{class:"q-pa-sm"}),e(D,{flat:"",class:v(["radius8",{"bg-transparent":a.$q.dark.mode,"bg-grey-1":!a.$q.dark.mode}])},{default:t(()=>[e(O,{class:"modified-qlist"},{default:t(()=>[d((l(),n(c,{clickable:"",to:"/account/edit-profile"},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(u,{color:"grey-5",name:"las la-user-alt"})]),_:1}),e(o,null,{default:t(()=>[i(r(a.$t("Manage Profile")),1)]),_:1}),e(o,{side:""},{default:t(()=>[e(s,{round:"",unelevated:"","text-color":"dark",icon:"las la-angle-right",dense:"",class:"text-grey-5 font13"})]),_:1})]),_:1})),[[f]]),d((l(),n(c,{clickable:"",to:"/account/change-password"},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(u,{color:"grey-5",name:"las la-lock"})]),_:1}),e(o,null,{default:t(()=>[i(r(a.$t("Change Password")),1)]),_:1}),e(o,{side:""},{default:t(()=>[e(s,{round:"",unelevated:"","text-color":"dark",icon:"las la-angle-right",dense:"",class:"text-grey-5 font13"})]),_:1})]),_:1})),[[f]]),d((l(),n(c,{clickable:"",to:"/account/payments"},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(u,{color:"grey-5",name:"las la-credit-card"})]),_:1}),e(o,null,{default:t(()=>[i(r(a.$t("Payments")),1)]),_:1}),e(o,{side:""},{default:t(()=>[e(s,{round:"",unelevated:"","text-color":"dark",icon:"las la-angle-right",dense:"",class:"text-grey-5 font13"})]),_:1})]),_:1})),[[f]]),d((l(),n(c,{clickable:"",to:"/account/favourites"},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(u,{color:"grey-5",name:"lab la-gratipay"})]),_:1}),e(o,null,{default:t(()=>[i(r(a.$t("Favourites")),1)]),_:1}),e(o,{side:""},{default:t(()=>[e(s,{round:"",unelevated:"","text-color":"dark",icon:"las la-angle-right",dense:"",class:"text-grey-5 font13"})]),_:1})]),_:1})),[[f]]),d((l(),n(c,{clickable:""},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(u,{color:"grey-5",name:"las la-bell"})]),_:1}),e(o,null,{default:t(()=>[i(r(a.$t("Push Notifications")),1)]),_:1}),e(o,{side:""},{default:t(()=>[e(q,{modelValue:h.app_push_notifications,"onUpdate:modelValue":[m[0]||(m[0]=p=>h.app_push_notifications=p),k.Updateaccountnotification],color:"secondary"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})),[[f]]),d((l(),n(c,{clickable:""},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(u,{color:"grey-5",name:"las la-bell"})]),_:1}),e(o,null,{default:t(()=>[i(r(a.$t("Promotional Notifications")),1)]),_:1}),e(o,{side:""},{default:t(()=>[e(q,{modelValue:h.promotional_push_notifications,"onUpdate:modelValue":[m[1]||(m[1]=p=>h.promotional_push_notifications=p),k.Updateaccountpromonotification],color:"secondary"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})),[[f]]),d((l(),n(c,{clickable:"",to:"/account/language"},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(u,{color:"grey-5",name:"las la-credit-card"})]),_:1}),e(o,null,{default:t(()=>[i(r(a.$t("Language")),1)]),_:1}),C.DataStore.language_data?(l(),n(o,{key:0,side:""},{default:t(()=>[(l(!0),b($,null,I(C.DataStore.language_data.data,p=>(l(),b($,{key:p},[p.code==this.DataStorePersisted.app_language?(l(),n(s,{key:0,"no-caps":"",label:a.$t(p.title),unelevated:"","text-color":"dark","icon-right":"las la-angle-right",dense:"",class:"text-grey-5 font13"},null,8,["label"])):Q("",!0)],64))),128))]),_:1})):Q("",!0)]),_:1})),[[f]]),d((l(),n(c,{clickable:""},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(u,{color:"grey-5",name:"las la-adjust"})]),_:1}),e(o,null,{default:t(()=>[i(r(a.$t("Dark Mode")),1)]),_:1}),e(o,{side:""},{default:t(()=>[e(q,{modelValue:h.theme_mode,"onUpdate:modelValue":m[2]||(m[2]=p=>h.theme_mode=p),color:"secondary"},null,8,["modelValue"])]),_:1})]),_:1})),[[f]]),d((l(),n(c,{clickable:"",to:"/account/delete"},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(u,{color:"grey-5",name:"las la-user-slash"})]),_:1}),e(o,null,{default:t(()=>[i(r(a.$t("Delete Account")),1)]),_:1}),e(o,{side:""},{default:t(()=>[e(s,{round:"",unelevated:"","text-color":"dark",icon:"las la-angle-right",dense:"",class:"text-grey-5 font13"})]),_:1})]),_:1})),[[f]]),d((l(),n(c,{clickable:"",onClick:k.inviteFriends},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(u,{color:"grey-5",name:"las la-user-friends"})]),_:1}),e(o,null,{default:t(()=>[i(r(a.$t("Invite Friends")),1)]),_:1}),e(o,{side:""},{default:t(()=>[e(s,{round:"",unelevated:"","text-color":"dark",icon:"las la-angle-right",dense:"",class:"text-grey-5 font13"})]),_:1})]),_:1},8,["onClick"])),[[f]]),d((l(),n(c,{to:"/legal",clickable:""},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(u,{color:"grey-5",name:"las la-balance-scale"})]),_:1}),e(o,null,{default:t(()=>[i(r(a.$t("Legal")),1)]),_:1}),e(o,{side:""},{default:t(()=>[e(s,{round:"",unelevated:"","text-color":"dark",icon:"las la-angle-right",dense:"",class:"text-grey-5 font13"})]),_:1})]),_:1})),[[f]]),d((l(),n(c,{clickable:"",onClick:k.logout},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(u,{color:"secondary",name:"las la-sign-out-alt"})]),_:1}),e(o,null,{default:t(()=>[i(r(a.$t("Logout")),1)]),_:1}),e(o,{side:""},{default:t(()=>[e(s,{round:"",unelevated:"","text-color":"dark",icon:"las la-angle-right",dense:"",class:"text-grey-5 font13"})]),_:1})]),_:1},8,["onClick"])),[[f]])]),_:1})]),_:1},8,["class"])]),_:1},8,["class"])],64)}var pe=w(Y,[["render",oe]]);export{pe as default};

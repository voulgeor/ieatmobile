import{x as j,_ as H,m as _,n as U,a0 as G,r as i,aW as W,w as C,o as Y,a1 as J,p,q as s,t as y,u as c,k as o,R as d,a8 as v,ab as N,a2 as D,ac as L,Q as n,aa as K,V as u,U as V,F as q,S as z,v as h}from"./index.628e6afe.js";import{Q as X}from"./QToolbar.380b4d8f.js";import{u as Z,a as ee}from"./use-page-sticky.3fe3a09e.js";import{Q as E}from"./QSpace.665629e1.js";import{Q as g}from"./QSkeleton.5592cb02.js";import{Q as te}from"./QTab.b92240b5.js";import{Q as ae}from"./QTabs.049a66e7.js";import{Q as oe,a as se}from"./QTabPanels.4a77a891.js";import{Q as re}from"./QPage.19e693fb.js";import{Q as le}from"./QPullToRefresh.69ba5569.js";import{u as ne}from"./DeliverySched.a16fab39.js";import{u as ie}from"./PlaceStore.8ff3f8ee.js";import"./QResizeObserver.23b01bb0.js";import"./rtl.4b414a6d.js";import"./use-panel.cb68c669.js";import"./touch.70a9dd44.js";import"./selection.e42c4336.js";import"./use-cache.b0833c75.js";import"./format.2a3572e1.js";var de=j({name:"QPageSticky",props:Z,setup(t,{slots:a}){const{getStickyContent:w}=ee();return()=>w(a)}});const ce={name:"HomePage",components:{HomeBanner:_(()=>h(()=>import("./HomeBanner.dee8e70a.js"),["assets/HomeBanner.dee8e70a.js","assets/QSkeleton.5592cb02.js","assets/index.628e6afe.js","assets/index.f7829e99.css","assets/QImg.67b25d0d.js","assets/swiper.min.09dfa79c.js","assets/swiper.min.102708ae.css"])),CuisineCarousel:_(()=>h(()=>import("./CuisineCarousel.6140dbc4.js"),["assets/CuisineCarousel.6140dbc4.js","assets/QSkeleton.5592cb02.js","assets/index.628e6afe.js","assets/index.f7829e99.css","assets/swiper.min.09dfa79c.js","assets/swiper.min.102708ae.css"])),BrowseCuisine:_(()=>h(()=>import("./BrowseCuisine.189a509e.js"),["assets/BrowseCuisine.189a509e.js","assets/QToolbarTitle.00ffb145.js","assets/index.628e6afe.js","assets/index.f7829e99.css","assets/QSpace.665629e1.js","assets/QToolbar.380b4d8f.js"])),MerchantCarousel:_(()=>h(()=>import("./MerchantCarousel.fe4e81d9.js"),["assets/MerchantCarousel.fe4e81d9.js","assets/QSkeleton.5592cb02.js","assets/index.628e6afe.js","assets/index.f7829e99.css","assets/QChip.b2c02d07.js","assets/swiper.min.09dfa79c.js","assets/swiper.min.102708ae.css"])),MerchantList:_(()=>h(()=>import("./MerchantList.b35dc59a.js"),["assets/MerchantList.b35dc59a.js","assets/index.628e6afe.js","assets/index.f7829e99.css","assets/QList.1313d8ab.js","assets/QImg.67b25d0d.js","assets/ClosePopup.a5a0c525.js"])),MerchantFilter:_(()=>h(()=>import("./MerchantFilter.99e6c60d.js"),["assets/MerchantFilter.99e6c60d.js","assets/QToolbarTitle.00ffb145.js","assets/index.628e6afe.js","assets/index.f7829e99.css","assets/QSpace.665629e1.js","assets/QToolbar.380b4d8f.js","assets/QBtnToggle.5a3fbedd.js","assets/QPullToRefresh.69ba5569.js","assets/touch.70a9dd44.js","assets/selection.e42c4336.js","assets/format.2a3572e1.js","assets/QFooter.45bae814.js","assets/QResizeObserver.23b01bb0.js","assets/DeliverySched.a16fab39.js"])),NoResults:_(()=>h(()=>import("./NoResults.3ddf9ca4.js"),["assets/NoResults.3ddf9ca4.js","assets/QImg.67b25d0d.js","assets/index.628e6afe.js","assets/index.f7829e99.css"]))},setup(){const t=U.getStorage("transaction_type"),a=G(),w=i({transaction_type:t}),e=i("popular"),A=i("all"),B=i([]),P=i(""),Q=i(1),k=i([]),x=W(),m=i(!0),S=i(void 0),F=i(null),r=i(null),f=i(null),I=i([]),M=i(!1),R=ne();C(()=>R.new_transaction_type,(l,T)=>{console.log("DeliveryschedStore=>"+l),R.filters.transaction_type=l,b(R.filters)}),C(()=>R.main_layout_header,(l,T)=>{M.value=!l});const O=ie();C(()=>O.data,(l,T)=>{a.filters.place_id=l.place_id,b(a.filters)}),C(()=>a.list_loading_handle,(l,T)=>{A.value=="all"&&(Object.keys(a.list_data).length>0?m.value=!0:m.value=!1)}),Y(()=>{I.value=J.getUser(),Object.keys(a.filters).length<=0&&b({transaction_type:t}),Object.keys(a.featured_data).length<=0&&a.getFeaturedList()});const $=l=>{k.value=l},b=l=>{m.value=!0,a.filters=l};return{filters:w,topResto:e,q:P,slide:Q,cuisineList:k,afterGetdata:$,applyFilter:b,goSearch:()=>{x.push("/search")},runFilter:()=>{console.debug("runFilter")},merchantList:F,merchantRefCarousel:r,merchantRefCarousel2:f,featuredTab:A,featured:B,afterResults:l=>{console.log("afterResults =>"+l),m.value=l},hasResult:m,DataStore:a,userData:I,filterAgain:()=>{console.log("filterAgain"),S.value.filter=!0},merchant_filter:S,refresh:l=>{a.getBanner(),a.CuisineList(),a.getFeaturedList(),b({transaction_type:t}),setTimeout(()=>{l()},1e3)},isSticky:M,PlaceStore:O}}},ue={class:"text-weight-bold q-ma-none"},me={key:0,class:"text-secondary"},fe={key:1,class:"text-secondary"},_e={class:"text-weight-medium q-ma-none"},pe={class:"q-mt-md"},he={key:0,class:"row justify-between"},ye={key:1,class:"row"},ge={class:"col"},ke={class:"text-h5 text-weight-medium"},be={class:"col text-right"},ve={class:"q-mt-sm q-mb-xs"},qe={key:0,class:"row justify-between"},we={key:0,class:"row"},Se={class:"col"},Re={class:"text-h5 text-weight-medium"},Ce={class:"col text-right"},De={class:"q-mt-sm q-mb-xs"},Ve={key:0,class:"row justify-between"},Ae={key:0,class:"row"},Pe={class:"col"},Qe={class:"text-h5 text-weight-medium"},xe={class:"col text-right"},Fe={class:"text-center q-pa-sm"};function Te(t,a,w,e,A,B){const P=p("HomeBanner"),Q=p("CuisineCarousel"),k=p("MerchantCarousel"),x=p("MerchantList"),m=p("NoResults"),S=p("MerchantFilter"),F=p("BrowseCuisine");return s(),y(le,{onRefresh:e.refresh},{default:c(()=>[o(re,{padding:"",class:v(["q-pl-md q-pr-md",{"flex flex-center":!e.hasResult}])},{default:c(()=>[e.hasResult?(s(),d(q,{key:0},[e.isSticky?(s(),y(de,{key:0,expand:"",position:"top",class:"z-top"},{default:c(()=>[o(X,{class:v(["text-dark q-pl-md q-pr-md q-pt-sm q-pb-sm",{"bg-mydark":t.$q.dark.mode,"bg-white":!t.$q.dark.mode}])},{default:c(()=>[o(N,{modelValue:e.q,"onUpdate:modelValue":a[1]||(a[1]=r=>e.q=r),label:t.$t("Search food and restaurants"),onClick:e.goSearch,readonly:"",outlined:"","lazy-rules":"","bg-color":t.$q.dark.mode?"grey600":"input","label-color":t.$q.dark.mode?"grey300":"grey",borderless:"",class:"input-borderless fit",dense:""},{prepend:c(()=>[o(D,{name:"eva-search-outline",size:"sm"})]),append:c(()=>[o(D,{name:"tune",class:"cursor-pointer",onClick:a[0]||(a[0]=r=>this.$refs.merchant_filter.filter=!0),size:"sm"})]),_:1},8,["modelValue","label","onClick","bg-color","label-color"])]),_:1},8,["class"])]),_:1})):L("",!0),n("h5",ue,[K(u(t.$t("Hello,"))+" ",1),e.userData?(s(),d("span",me,u(e.userData.first_name),1)):(s(),d("span",fe,u(t.$t("Guest")),1))]),n("p",_e,u(t.$t("Find your delicious dish")),1),o(E,{class:"q-pa-xs"}),o(N,{modelValue:e.q,"onUpdate:modelValue":a[3]||(a[3]=r=>e.q=r),label:t.$t("Search food and restaurants"),onClick:e.goSearch,readonly:"",outlined:"","lazy-rules":"","bg-color":t.$q.dark.mode?"grey600":"input","label-color":t.$q.dark.mode?"grey300":"grey",borderless:"",class:"input-borderless"},{prepend:c(()=>[o(D,{name:"eva-search-outline",size:"sm"})]),append:c(()=>[o(D,{name:"tune",class:"cursor-pointer",onClick:a[2]||(a[2]=r=>this.$refs.merchant_filter.filter=!0),size:"sm"})]),_:1},8,["modelValue","label","onClick","bg-color","label-color"]),o(E,{class:"q-pa-sm"}),o(P,{ref:"home_banner"},null,512),n("div",pe,[e.DataStore.loading_cuisine?(s(),d("div",he,[o(g,{type:"text",style:{width:"100px"}}),o(g,{type:"text",style:{width:"50px"}})])):(s(),d("div",ye,[n("div",ge,[n("div",ke,u(t.$t("Explore Cuisine")),1)]),n("div",be,[o(V,{flat:"",color:t.$q.dark.mode?"grey300":"secondary",label:t.$t("Show All"),"no-caps":"",class:"text-weight-600",dense:"",onClick:a[4]||(a[4]=r=>this.$refs.browse_cuisine.modal=!this.$refs.browse_cuisine.modal)},null,8,["color","label"])])]))]),o(Q,{ref:"cuisine_carousel",design:1,onAfterGetdata:e.afterGetdata,class:"q-pt-sm q-pb-md"},null,8,["onAfterGetdata"]),n("div",ve,[e.DataStore.car_loading[0]?(s(),d("div",qe,[o(g,{type:"text",style:{width:"100px"}}),o(g,{type:"text",style:{width:"50px"}})])):(s(),d(q,{key:1},[e.DataStore.hasCarData(0)?(s(),d("div",we,[n("div",Se,[n("div",Re,u(t.$t("Popular Near You")),1)]),n("div",Ce,[o(V,{to:{name:"feed",query:{query:"featured",featured_id:e.topResto}},flat:"",color:t.$q.dark.mode?"grey300":"secondary",label:t.$t("Show All"),"no-caps":"",class:"text-weight-600",dense:""},null,8,["to","color","label"])])])):L("",!0)],64))]),o(k,{ref:"merchantRefCarousel",list_type:"featured",featured_id:e.topResto,filters:e.DataStore.filters,index:0},null,8,["featured_id","filters"]),n("div",De,[e.DataStore.car_loading[1]?(s(),d("div",Ve,[o(g,{type:"text",style:{width:"100px"}}),o(g,{type:"text",style:{width:"50px"}})])):(s(),d(q,{key:1},[e.DataStore.hasCarData(1)?(s(),d("div",Ae,[n("div",Pe,[n("div",Qe,u(t.$t("Recommended")),1)]),n("div",xe,[o(V,{to:{name:"feed",query:{query:"featured",featured_id:"recommended"}},flat:"",color:t.$q.dark.mode?"grey300":"secondary",label:t.$t("Show All"),"no-caps":"",class:"text-weight-600",dense:""},null,8,["color","label"])])])):L("",!0)],64))]),o(k,{ref:"merchantRefCarousel",list_type:"featured",featured_id:"recommended",filters:e.DataStore.filters,index:1},null,8,["filters"]),o(E,{class:"q-pa-xs"}),o(ae,{modelValue:e.featuredTab,"onUpdate:modelValue":a[5]||(a[5]=r=>e.featuredTab=r),dense:"","active-color":"primary","indicator-color":"primary",align:"left","narrow-indicator":"","no-caps":"",class:v({"text-grey300":t.$q.dark.mode,"text-dark":!t.$q.dark.mode}),breakpoint:0},{default:c(()=>[(s(!0),d(q,null,z(e.DataStore.featured_data,(r,f)=>(s(),y(te,{key:r,name:f,label:t.$t(r),"content-class":"text-weight-500 "},null,8,["name","label"]))),128))]),_:1},8,["modelValue","class"]),o(oe,{modelValue:e.featuredTab,"onUpdate:modelValue":a[6]||(a[6]=r=>e.featuredTab=r),animated:"",class:v({"bg-mydark text-white":t.$q.dark.mode,"bg-white text-black":!t.$q.dark.mode})},{default:c(()=>[(s(!0),d(q,null,z(e.DataStore.featured_data,(r,f)=>(s(),y(se,{key:r,name:f,label:t.$t(r),class:"q-pa-sm"},{default:c(()=>[o(x,{ref_for:!0,ref:"merchantList",list_type:"featured",featured_id:f,filters:e.DataStore.filters,onAfterResults:e.afterResults},null,8,["featured_id","filters","onAfterResults"]),n("div",Fe,[e.DataStore.hasFeed?(s(),y(V,{key:0,color:t.$q.dark.mode?"grey300":"secondary",to:{path:"feed",query:{query:"featured",featured_id:f}},unelevated:"","no-caps":"",flat:"",dense:"",label:t.$t("Show All")},null,8,["color","to","label"])):(s(),d("div",{key:1,class:v(["font12 q-pa-md",{"text-grey300":t.$q.dark.mode,"text-dark":!t.$q.dark.mode}])},u(t.$t("No Results")),3))])]),_:2},1032,["name","label"]))),128))]),_:1},8,["modelValue","class"])],64)):(s(),y(m,{key:1,onFilterAgain:e.filterAgain},null,8,["onFilterAgain"])),o(S,{ref:"merchant_filter",cuisine_data:e.DataStore.cuisine,onApplyFilter:e.applyFilter,onRunFilter:e.runFilter},null,8,["cuisine_data","onApplyFilter","onRunFilter"]),o(F,{ref:"browse_cuisine"},null,512)]),_:1},8,["class"])]),_:1},8,["onRefresh"])}var rt=H(ce,[["render",Te]]);export{rt as default};

import{_ as Q,m as g,bi as h,n as l,a1 as p,p as f,q as b,R as _,j as t,u as a,a8 as y,F as k,U as n,aa as V,V as u,Q as i,ab as w,a2 as q,bj as C,a$ as I,ac as P,v as $}from"./index.ea6274c1.js";import{Q as T}from"./QToolbarTitle.f9df01bd.js";import{Q as F}from"./QToolbar.955f19ff.js";import{Q as A}from"./QHeader.f05143ed.js";import{Q as E}from"./QForm.109fb9f8.js";import{Q as v}from"./QSpace.df9ea38d.js";import{Q as z}from"./QPage.d653db0f.js";import{u as R}from"./ClientStore.d0bc475d.js";import"./QResizeObserver.88ce5d1b.js";const U={name:"LoginPage",data(){return{username:"",password:"",field_type:"password",loading:!1,redirect:"",google_client_id:"",facebook_app_id:"",remember:!1}},setup(){return{ClientStore:R()}},components:{GoogleLogin:g(()=>$(()=>import("./GoogleLogin.052e4c48.js"),["assets/GoogleLogin.052e4c48.js","assets/index.ea6274c1.js","assets/index.f7829e99.css"])),FacebookLogin:g(()=>$(()=>import("./FacebookLogin.3b607da4.js"),["assets/FacebookLogin.3b607da4.js","assets/index.ea6274c1.js","assets/index.f7829e99.css"]))},mounted(){this.redirect=this.$route.query.redirect,this.google_client_id=h.google_client_id,this.facebook_app_id=h.facebook_app_id},computed:{FieldIcon(){return this.field_type==="password"?"eva-eye-outline":"eva-eye-off-outline"},hasSocialLogin(){return!l.empty(this.google_client_id)||!l.empty(this.facebook_app_id)}},methods:{onSubmit(){this.loading=!0,l.userLogin({username:this.username,password:this.password,local_id:l.getStorage("place_id")}).then(e=>{l.notify("light-green",e.msg,"check_circle",this.$q),p.setUser(e.details.user_data),p.setToken(e.details.user_token),this.ClientStore.user_settings=e.details.user_settings;const o=l.getStorage("place_id");typeof o!="undefined"&&o!==null?typeof this.redirect!="undefined"&&this.redirect!==null?this.$router.push(this.redirect):this.$router.push("/home"):this.$router.push("/location")}).catch(e=>{l.notify("dark",e,"error",this.$q)}).then(e=>{this.loading=!1})},afterLogin(e){e.place_id=l.getStorage("place_id"),l.socialRegistration(e).then(o=>{let c=!1;if(l.empty(o.details.complete_registration)||(c=o.details.complete_registration),o.details.verification==="1")this.$router.push({path:"/account/verify",query:{uuid:o.details.uuid,msg:o.msg}});else if(console.debug("=>"+c),c)this.$router.push({path:"/account/complete-registration",query:{uuid:o.details.uuid}});else{l.notify("dark",o.msg,"check_circle",this.$q),p.setUser(o.details.user_data),p.setToken(o.details.user_token),this.ClientStore.user_settings=o.details.user_settings;const m=l.getStorage("place_id");typeof m!="undefined"&&m!==null?typeof this.redirect!="undefined"&&this.redirect!==null?this.$router.push(this.redirect):this.$router.push("/home"):this.$router.push("/location")}}).catch(o=>{l.notify("dark",o,"error",this.$q)}).then(o=>{})}}},x={class:"full-width q-pa-md"},B={class:"text-weight-bold"},D={class:"text-weight-medium q-ma-none"},N={class:"row"},j={class:"col"},G={class:"col text-right"},O={class:"text-center q-pt-md q-pb-sm"},H={class:"social-login"},M={class:"relative-position q-mb-lg q-mt-md"},Y={class:"row justify-between full-width"},J={class:"col text-left text-white"},K={class:"col-1 text-right text-white"};function W(e,o,c,m,r,d){const L=f("FacebookLogin"),S=f("GoogleLogin");return b(),_(k,null,[t(A,{reveal:"","reveal-offset":"50",class:y({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:a(()=>[t(F,null,{default:a(()=>[t(n,{onClick:o[0]||(o[0]=s=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",class:"q-mr-sm",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),t(T,{class:"text-weight-bold"},{default:a(()=>[V(u(e.$t("Sigin In")),1)]),_:1})]),_:1})]),_:1},8,["class"]),t(z,{padding:"",class:"flex flex-center"},{default:a(()=>[i("div",x,[i("h5",B,u(e.$t("Let's Sign You In")),1),i("p",D,u(e.$t("Enter your email and password for sigin.")),1),t(n,{flat:"",label:e.$t("Dont have an account?"),"no-caps":"",class:"q-pa-none text-weight-bold min-height q-mb-md",color:"secondary",to:"/user/signup"},null,8,["label"]),t(E,{onSubmit:d.onSubmit},{default:a(()=>[t(w,{modelValue:r.username,"onUpdate:modelValue":o[1]||(o[1]=s=>r.username=s),label:e.$t("Email"),outlined:"","lazy-rules":"","bg-color":e.$q.dark.mode?"grey600":"input","label-color":e.$q.dark.mode?"grey300":"grey",borderless:"",class:"input-borderless",rules:[s=>s&&s.length>0||e.$t("This field is required")]},null,8,["modelValue","label","bg-color","label-color","rules"]),t(w,{modelValue:r.password,"onUpdate:modelValue":o[3]||(o[3]=s=>r.password=s),type:r.field_type,outlined:"","bg-color":e.$q.dark.mode?"grey600":"input","label-color":e.$q.dark.mode?"grey300":"grey",borderless:"",class:"input-borderless",label:e.$t("Password"),"lazy-rules":"",rules:[s=>s&&s.length>0||e.$t("This field is required")]},{append:a(()=>[t(q,{onClick:o[2]||(o[2]=s=>r.field_type=r.field_type=="password"?"text":"password"),name:d.FieldIcon,color:"grey",class:"cursor-pointer"},null,8,["name"])]),_:1},8,["modelValue","type","bg-color","label-color","label","rules"]),i("div",N,[i("div",j,[t(C,{dense:"",modelValue:r.remember,"onUpdate:modelValue":o[4]||(o[4]=s=>r.remember=s),label:e.$t("Remember Me"),color:"primary"},null,8,["modelValue","label"])]),i("div",G,[t(n,{flat:"",label:e.$t("Forgot Password?"),"no-caps":"",class:"q-pa-none text-weight-bold min-height q-mb-md",color:"secondary",to:"/user/forgotpass"},null,8,["label"])])]),t(n,{loading:r.loading,type:"submit",label:e.$t("Sign In"),unelevated:"","no-caps":"",color:"primary text-white",class:"full-width text-weight-bold",size:"lg"},null,8,["loading","label"]),i("div",O,[t(n,{flat:"",label:e.$t("Continue as guest"),"no-caps":"",class:"q-pa-none text-weight-bold min-height",color:"secondary",to:"/home",size:"md"},null,8,["label"])])]),_:1},8,["onSubmit"]),i("div",H,[i("div",M,[t(I,{spaced:"",labe:""}),i("div",{class:y(["absolute-center q-pl-sm q-pr-sm",{"bg-mydark text-grey300":e.$q.dark.mode,"bg-white text-black":!e.$q.dark.mode}])},u(e.$t("Or")),3)]),t(n,{unelevated:"","no-caps":"",color:"primary",class:"full-width text-weight-bold",size:"lg",to:"/user/login-phone"},{default:a(()=>[i("div",Y,[i("div",J,u(e.$t("Continue with Phone")),1),i("div",K,[t(q,{name:"las la-phone"})])])]),_:1}),t(v,{class:"q-pa-sm"}),d.hasSocialLogin?(b(),_(k,{key:0},[t(L,{ref:"facebook_login",app_id:r.facebook_app_id,onAfterLogin:d.afterLogin},null,8,["app_id","onAfterLogin"]),t(v,{class:"q-pa-sm"}),t(S,{client_id:r.google_client_id,ref:"google_login",onAfterLogin:d.afterLogin},null,8,["client_id","onAfterLogin"])],64)):P("",!0)])])]),_:1})],64)}var ae=Q(U,[["render",W]]);export{ae as default};

import{x as B,b4 as F,aZ as R,b5 as w,bd as Q,r as k,c as u,$ as z,h as f,H as D,a2 as K,g as P,a_ as j,aK as m}from"./index.b5428c1f.js";import{b as N}from"./format.ec2e0666.js";var Z=B({name:"QRating",props:{...F,...R,modelValue:{type:Number,required:!0},max:{type:[String,Number],default:5},icon:[String,Array],iconHalf:[String,Array],iconSelected:[String,Array],color:[String,Array],colorHalf:[String,Array],colorSelected:[String,Array],noReset:Boolean,noDimming:Boolean,readonly:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{slots:A,emit:b}){const{proxy:{$q:I}}=P(),x=w(e),H=Q(e),C=j(H),r=k(0);let i={};const s=u(()=>e.readonly!==!0&&e.disable!==!0),$=u(()=>`q-rating row inline items-center q-rating--${s.value===!0?"":"non-"}editable`+(e.noDimming===!0?" q-rating--no-dimming":"")+(e.disable===!0?" disabled":"")+(e.color!==void 0&&Array.isArray(e.color)===!1?` text-${e.color}`:"")),L=u(()=>{const t=Array.isArray(e.icon)===!0?e.icon.length:0,n=Array.isArray(e.iconSelected)===!0?e.iconSelected.length:0,a=Array.isArray(e.iconHalf)===!0?e.iconHalf.length:0,c=Array.isArray(e.color)===!0?e.color.length:0,l=Array.isArray(e.colorSelected)===!0?e.colorSelected.length:0,o=Array.isArray(e.colorHalf)===!0?e.colorHalf.length:0;return{iconLen:t,icon:t>0?e.icon[t-1]:e.icon,selIconLen:n,selIcon:n>0?e.iconSelected[n-1]:e.iconSelected,halfIconLen:a,halfIcon:a>0?e.iconHalf[n-1]:e.iconHalf,colorLen:c,color:c>0?e.color[c-1]:e.color,selColorLen:l,selColor:l>0?e.colorSelected[l-1]:e.colorSelected,halfColorLen:o,halfColor:o>0?e.colorHalf[o-1]:e.colorHalf}}),V=u(()=>{const t=[],n=L.value,a=Math.ceil(e.modelValue),c=e.iconHalf===void 0||a===e.modelValue?-1:a;for(let l=1;l<=e.max;l++){const o=r.value===0&&e.modelValue>=l||r.value>0&&r.value>=l,d=c===l&&r.value<l,h=r.value>0&&(d===!0?a:e.modelValue)>=l&&r.value<l,S=d===!0?l<=n.halfColorLen?e.colorHalf[l-1]:n.halfColor:n.selColor!==void 0&&o===!0?l<=n.selColorLen?e.colorSelected[l-1]:n.selColor:l<=n.colorLen?e.color[l-1]:n.color;t.push({name:(d===!0?l<=n.halfIconLen?e.iconHalf[l-1]:n.halfIcon:n.selIcon!==void 0&&(o===!0||h===!0)?l<=n.selIconLen?e.iconSelected[l-1]:n.selIcon:l<=n.iconLen?e.icon[l-1]:n.icon)||I.iconSet.rating.icon,classes:"q-rating__icon"+(o===!0||d===!0?" q-rating__icon--active":"")+(h===!0?" q-rating__icon--exselected":"")+(r.value===l?" q-rating__icon--hovered":"")+(S!==void 0?` text-${S}`:"")})}return t}),_=u(()=>{if(e.disable===!0)return{"aria-disabled":"true"};if(e.readonly===!0)return{"aria-readonly":"true"}}),q=u(()=>s.value===!0?0:null);function v(t){if(s.value===!0){const n=N(parseInt(t,10),1,parseInt(e.max,10)),a=e.noReset!==!0&&e.modelValue===n?0:n;a!==e.modelValue&&b("update:modelValue",a),r.value=0}}function y(t){s.value===!0&&(r.value=t)}function M(t,n){switch(t.keyCode){case 13:case 32:return v(n),m(t);case 37:case 40:return i[`rt${n-1}`]&&i[`rt${n-1}`].$el.focus(),m(t);case 39:case 38:return i[`rt${n+1}`]&&i[`rt${n+1}`].$el.focus(),m(t)}}function g(){r.value=0}return z(()=>{i={}}),()=>{const t=[];return V.value.forEach(({classes:n,name:a},c)=>{const l=c+1;t.push(f("div",{key:l,ref:o=>{i[`rt${l}`]=o},class:"q-rating__icon-container flex flex-center",tabindex:q.value,onClick(){v(l)},onMouseover(){y(l)},onMouseout:g,onFocus(){y(l)},onBlur:g,onKeyup(o){M(o,l)}},D(A[`tip-${l}`],[f(K,{class:n,name:a})])))}),e.name!==void 0&&e.disable!==!0&&C(t,"push"),f("div",{class:$.value,style:x.value,..._.value},t)}}});export{Z as Q};

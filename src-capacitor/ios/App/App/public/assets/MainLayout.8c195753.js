import{a8 as Q,v as l,_ as C,d as P,m as d,n as o,a2 as A,p as n,q as p,t as _,u as r,k as t,a9 as h,V as f,R as g,a3 as I,X as S,ab as q,ad as T}from"./index.a3a9b403.js";import{Q as V}from"./QToolbar.84f8e4cf.js";import{Q as E}from"./QHeader.944e3fc5.js";import{Q as u}from"./QRouteTab.8cbf9684.js";import{Q as R}from"./QBadge.7559c5a7.js";import{Q as L}from"./QTabs.f993e1c2.js";import{Q as B}from"./QFooter.f4c4baca.js";import{Q as N,a as O}from"./QLayout.d6d9d552.js";import{u as M}from"./PlaceStore.afc33e35.js";import{u as H}from"./DeliverySched.a97c4b34.js";import{u as z}from"./CartStore.f7f72421.js";import"./QResizeObserver.b1cbdf85.js";import"./rtl.b51694b1.js";import"./QScrollObserver.116e2cc1.js";const m=Q("Device",{web:()=>l(()=>import("./web.3bc435a8.js"),["assets/web.3bc435a8.js","assets/index.a3a9b403.js","assets/index.469535cd.css"]).then(e=>new e.DeviceWeb)}),F=P({name:"MainLayout",components:{DeliveryDetails:d(()=>l(()=>import("./DeliveryDetails.f3d3cd09.js"),["assets/DeliveryDetails.f3d3cd09.js","assets/index.a3a9b403.js","assets/index.469535cd.css","assets/QBtnToggle.06d0f9e4.js","assets/QItemLabel.0e0c1fe6.js","assets/QList.26809fbc.js","assets/PlaceStore.afc33e35.js","assets/DeliverySched.a97c4b34.js"])),DeliverySched:d(()=>l(()=>import("./DeliverySched.a77a8fc1.js"),["assets/DeliverySched.a77a8fc1.js","assets/QBtnToggle.06d0f9e4.js","assets/index.a3a9b403.js","assets/index.469535cd.css","assets/QSelect.782d8a98.js","assets/QChip.3e943c18.js","assets/QItemLabel.0e0c1fe6.js","assets/selection.be4b730a.js","assets/rtl.b51694b1.js","assets/format.2a3572e1.js","assets/DeliverySched.a97c4b34.js"])),NotiButton:d(()=>l(()=>import("./NotiButton.da15bcfd.js"),["assets/NotiButton.da15bcfd.js","assets/index.a3a9b403.js","assets/index.469535cd.css","assets/QBadge.7559c5a7.js"])),QuickTrack:d(()=>l(()=>import("./QuickTrack.f32e4829.js"),["assets/QuickTrack.f32e4829.js","assets/index.a3a9b403.js","assets/index.469535cd.css","assets/QBadge.7559c5a7.js","assets/QLinearProgress.facb8b60.js"])),PushDialog:d(()=>l(()=>import("./PushDialog.491eed39.js"),["assets/PushDialog.491eed39.js","assets/index.a3a9b403.js","assets/index.469535cd.css","assets/QSpace.eb4aa71a.js"]))},setup(){const e=M(),a=H(),s=z();return{PlaceStore:e,deliveryschedStore:a,CartStore:s}},data(){return{tab:"home",dialog_location:!1,dialog_deliverytime:!1,transaction_type:"delivery",location_options:"share_location",delivery_time_options:"",back_url:"/home?refresh=1"}},created(){this.$q.capacitor&&this.DeviceInit()},mounted(){this.initData()},methods:{initData(){this.PlaceStore.getPlace(),this.deliveryschedStore.getDeliverySched(o.getStorage("cart_uuid"),0),this.CartStore.hadItem()||this.CartStore.getCount()},showSched(){this.$refs.delivery_details.showModal(!1),this.$refs.delivery_sched.showSched(!0)},afterSavetrans(){console.log("afterSavetrans"),this.deliveryschedStore.getDeliverySched(o.getStorage("cart_uuid"),0)},afterSavetranstype(e){console.log("afterSavetranstype"),this.deliveryschedStore.getDeliverySched(o.getStorage("cart_uuid"))},DeviceInit(){const e=o.getSession("device_token"),a=o.getSession("device_registered"),s=o.getSession("device_registered_auth");A.authenticated()?s!==1&&m.getId().then(i=>{m.getInfo().then(c=>{this.updateDevice(e,i.uuid,c.platform)})}):a!==1&&m.getId().then(i=>{m.getInfo().then(c=>{this.registerDevice(e,i.uuid,c.platform)})})},registerDevice(e,a,s){o.registerDevice(e,a,s).then(i=>{o.setSession("device_registered",1)})},updateDevice(e,a,s){o.updateDevice(e,a,s).then(i=>{o.setSession("device_registered_auth",1)})},revealStateChange(e){this.deliveryschedStore.main_layout_header=e}}}),U={class:"fit row items-center"};function W(e,a,s,i,c,X){const y=n("NotiButton"),k=n("router-view"),D=n("DeliveryDetails"),b=n("DeliverySched"),$=n("QuickTrack"),w=n("PushDialog");return p(),_(N,{view:"lHh Lpr lFf"},{default:r(()=>[t(E,{reveal:"",class:"bg-white",onReveal:e.revealStateChange},{default:r(()=>[t(V,{class:h(["top-toolbar row",{"bg-mydark text-white":e.$q.dark.mode,"text-primary":!e.$q.dark.mode}]),dense:""},{default:r(()=>[t(f,{to:"/account-menu",flat:"",dense:"",icon:"las la-bars",class:"q-mr-sm",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),t(f,{onClick:a[0]||(a[0]=v=>this.$refs.delivery_details.showModal(!0)),unelevated:"",color:e.$q.dark.mode?"grey600":"white","text-color":e.$q.dark.mode?"grey300":"dark",dense:"","no-caps":"",class:"col-9"},{default:r(()=>[g("div",U,[t(I,{name:"las la-map-marker-alt",color:"grey",size:"15px"}),g("div",{class:h(["q-ml-xs font13 ellipsis col-10",{"text-grey300":e.$q.dark.mode,"text-dark":!e.$q.dark.mode}])},S(e.$t(e.PlaceStore.address)),3)])]),_:1},8,["color","text-color"]),t(y)]),_:1},8,["class"])]),_:1},8,["onReveal"]),t(B,{bordered:"",class:"bg-white text-dark"},{default:r(()=>[t(L,{modelValue:e.tab,"onUpdate:modelValue":a[1]||(a[1]=v=>e.tab=v),dense:"","indicator-color":"transparent","active-color":"secondary",class:h({"bg-mydark text-white":e.$q.dark.mode,"text-dark":!e.$q.dark.mode})},{default:r(()=>[t(u,{name:"home",icon:"las la-home",label:e.$t("Home"),"no-caps":"",to:"/home"},null,8,["label"]),t(u,{name:"browse",icon:"search",label:e.$t("Search"),"no-caps":"",to:"/search"},null,8,["label"]),t(u,{name:"cart",icon:"las la-shopping-bag",label:e.$t("Cart"),"no-caps":"",to:"/cart"},{default:r(()=>[e.CartStore.hasItem?(p(),_(R,{key:0,color:"secondary",floating:"",rounded:""},{default:r(()=>[q(S(e.CartStore.items_count),1)]),_:1})):T("",!0)]),_:1},8,["label"]),t(u,{name:"account",icon:"las la-user-alt",label:e.$t("Account"),"no-caps":"",to:"/account-menu"},null,8,["label"])]),_:1},8,["modelValue","class"])]),_:1}),t(O,null,{default:r(()=>[t(k)]),_:1}),t(D,{ref:"delivery_details",back_url:e.back_url,onShowSched:e.showSched,onAfterSavetrans:e.afterSavetrans,onAfterSavetranstype:e.afterSavetranstype},null,8,["back_url","onShowSched","onAfterSavetrans","onAfterSavetranstype"]),t(b,{ref:"delivery_sched",slug:"0",onAfterSavetrans:e.afterSavetrans},null,8,["onAfterSavetrans"]),t($,{ref:"quick_track"},null,512),t(w,{ref:"push_dialog"},null,512)]),_:1})}var ne=C(F,[["render",W]]);export{ne as default};

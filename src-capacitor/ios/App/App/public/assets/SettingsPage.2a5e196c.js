import{_ as V,n as r,bL as g,bi as h,q as c,R as S,j as t,u as i,F as v,U as b,aa as f,V as u,t as Q,ar as p,b0 as l,be as d,ad as q}from"./index.b5428c1f.js";import{Q as y}from"./QToolbarTitle.ad5aac42.js";import{Q as w}from"./QToolbar.b8f4cf51.js";import{Q as P}from"./QHeader.3c924b64.js";import{Q as $}from"./QInnerLoading.e8a064f8.js";import{Q as m}from"./QItemLabel.25732301.js";import{Q as C}from"./QList.9257b2df.js";import{Q as T}from"./QFooter.04730c47.js";import{Q as F}from"./QPage.40760bfd.js";import"./QResizeObserver.74d4236c.js";const I={name:"SettingsPage",data(){return{loading:!1,loading2:!1,data:[],app_push_notifications:!1,app_sms_notifications:!1,offers_email_notifications:!1,promotional_push_notifications:!1}},mounted(){this.getSettings()},methods:{getSettings(){this.loading=!0,r.getSettings().then(o=>{this.app_push_notifications=o.details.app_push_notifications==="1",this.app_sms_notifications=o.details.app_sms_notifications==="1",this.offers_email_notifications=o.details.offers_email_notifications==="1",this.promotional_push_notifications=o.details.promotional_push_notifications==="1"}).catch(o=>{r.notify("dark",o,"error",this.$q)}).then(o=>{this.loading=!1})},saveSettings(){this.loading2=!0;const o={app_push_notifications:this.app_push_notifications,app_sms_notifications:this.app_sms_notifications,offers_email_notifications:this.offers_email_notifications,promotional_push_notifications:this.promotional_push_notifications};r.saveSettings(o).then(e=>{r.notify("dark",e.msg,"check",this.$q);const _=e.details.app_push_notifications;this.$q.platform.is.mobile&&(_?(console.debug("subscribe"),g.subscribeTo({topic:h.topic}).then(n=>console.debug("subscribed to topic")).catch(n=>console.log(n))):(console.debug("un-subscribe"),g.unsubscribeFrom({topic:h.topic}).then(()=>console.debug("unsubscribed from topic")).catch(n=>console.log(n))))}).catch(e=>{r.notify("dark",e,"error",this.$q)}).then(e=>{this.loading2=!1})}}};function U(o,e,_,n,s,k){return c(),S(v,null,[t(P,{reveal:"","reveal-offset":"50",class:"bg-grey-1 text-dark"},{default:i(()=>[t(w,null,{default:i(()=>[t(b,{onClick:e[0]||(e[0]=a=>o.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",class:"q-mr-sm",color:"dark"}),t(y,{class:"text-weight-bold"},{default:i(()=>[f(u(o.$t("Settings")),1)]),_:1})]),_:1})]),_:1}),t(F,{padding:"",class:"bg-grey-1 q-pl-md q-pr-md row items-stretch"},{default:i(()=>[s.loading?(c(),Q($,{key:0,showing:!0,color:"primary",size:"md","label-class":"dark",class:"transparent"})):(c(),Q(q,{key:1,flat:"",class:"radius8 col-12"},{default:i(()=>[t(C,null,{default:i(()=>[t(p,null,{default:i(()=>[t(l,null,{default:i(()=>[t(m,null,{default:i(()=>[f(u(o.$t("Receive push notifications")),1)]),_:1})]),_:1}),t(l,{side:""},{default:i(()=>[t(d,{modelValue:s.app_push_notifications,"onUpdate:modelValue":e[1]||(e[1]=a=>s.app_push_notifications=a)},null,8,["modelValue"])]),_:1})]),_:1}),t(p,null,{default:i(()=>[t(l,null,{default:i(()=>[t(m,null,{default:i(()=>[f(u(o.$t("Receive SMS notifications")),1)]),_:1})]),_:1}),t(l,{side:""},{default:i(()=>[t(d,{modelValue:s.app_sms_notifications,"onUpdate:modelValue":e[2]||(e[2]=a=>s.app_sms_notifications=a)},null,8,["modelValue"])]),_:1})]),_:1}),t(p,null,{default:i(()=>[t(l,null,{default:i(()=>[t(m,null,{default:i(()=>[f(u(o.$t("Promotional Push notifications")),1)]),_:1})]),_:1}),t(l,{side:""},{default:i(()=>[t(d,{modelValue:s.promotional_push_notifications,"onUpdate:modelValue":e[3]||(e[3]=a=>s.promotional_push_notifications=a)},null,8,["modelValue"])]),_:1})]),_:1}),t(p,null,{default:i(()=>[t(l,null,{default:i(()=>[t(m,null,{default:i(()=>[f(u(o.$t("Receive offers by email")),1)]),_:1})]),_:1}),t(l,{side:""},{default:i(()=>[t(d,{modelValue:s.offers_email_notifications,"onUpdate:modelValue":e[4]||(e[4]=a=>s.offers_email_notifications=a)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})),t(T,{reveal:"",class:"bg-grey-1 q-pl-md q-pr-md q-pb-sm q-pt-sm text-dark"},{default:i(()=>[t(b,{onClick:k.saveSettings,loading:s.loading2,label:o.$t("Save"),unelevated:"","no-caps":"",color:"primary text-white",class:"full-width text-weight-bold",size:"lg"},null,8,["onClick","loading","label"])]),_:1})]),_:1})],64)}var E=V(I,[["render",U]]);export{E as default};

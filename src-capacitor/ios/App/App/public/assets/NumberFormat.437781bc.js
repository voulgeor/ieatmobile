import{b_ as S,aj as w,q as v,S as x,_ as k,a1 as _,X as D}from"./index.e230319b.js";/**
 * Vue Number Format 3.2.0
 * (c) 2021-2022 Dipak Sarkar <hello@dipaksarkar.in> (https://dipaksarkar.in/)
 * @license MIT
 */var d={prefix:"",suffix:"",separator:",",decimal:".",precision:2,minimumFractionDigits:!1,prefill:!0,reverseFill:!1,min:!1,max:!1,nullValue:""};function E(e=d){this.options=Object.assign(d,e),this.input="",this.number="",this.isClean=!0,this.isNull=(i=this.input)=>this.isClean?!this.numberOnly(i,new RegExp("[^0-9]+","gi")):!this.numberOnly(i,new RegExp("[^0-9\\-]+","gi")),this.clean=(i=!1)=>(this.isClean=i,this),this.sign=()=>this.isClean?this.input.toString().indexOf("-")>=0&&this.realNumber()>0?"-":"":this.input.toString().indexOf("-")>=0?"-":"";function t(i,n,r){return Math.max(i,Math.min(n,r))}function s(i){return t(0,i,20)}function a(i,n){var r=Math.pow(10,n),o=parseFloat(i)/r||0;return o.toFixed(s(n))}this.toNumber=i=>Number(i),this.numberOnly=(i,n)=>i==null?void 0:i.toString().replace(n,""),this.isNegative=this.sign()==="-",this.numbers=()=>(this.options.reverseFill?this.number=a(this.numberOnly(this.input,/\D+/g),this.options.precision).replace(".",this.options.decimal):typeof this.input=="number"?this.number=this.parts(this.input.toString().replace("-",""),".").join(this.options.decimal):(this.number=this.numberOnly(this.input,new RegExp(`[^0-9\\${this.options.decimal}]+`,"gi")),this.number=this.parts(this.number).join(this.options.decimal)),this.number),this.realNumber=()=>this.numbers().toString().replace(this.options.decimal,"."),this.parts=(i="",n=this.options.decimal)=>{var r=i.toString().split(n);if(r.length>1&&(r[0]=this.toNumber(r[0])||0,r[1]=r.slice(1,r.length).join(""),r=r.slice(0,2)),this.isClean){const o=this.toNumber(r.join(".")).toFixed(this.options.precision),u=this.toNumber(o),m=u.toFixed(this.options.minimumFractionDigits);this.options.minimumFractionDigits&&this.options.minimumFractionDigits>=0&&u.toString().length<m.length?r=m.toString().split("."):r=u.toString().split(".")}return r.slice(0,2)},this.addSeparator=()=>{var i=this.numbers().split(this.options.decimal);return i[0]=i[0].toString().replace(/(\d)(?=(?:\d{3})+\b)/gm,`$1${this.options.separator}`),i.join(this.options.decimal)},this.format=(i="")=>(this.input=i,this.isNull()&&!this.options.reverseFill?this.options.nullValue:this.sign()+this.options.prefix+this.addSeparator()+this.options.suffix),this.unformat=(i="")=>(this.input=i,this.isNull()&&!this.options.reverseFill?this.options.nullValue:this.sign()+this.realNumber())}const c="__input-facade__";function N(e){return JSON.parse(JSON.stringify(e))}function V(){return new CustomEvent("input",{bubbles:!0,cancelable:!0,detail:{facade:!0}})}function O(){return new CustomEvent("change",{bubbles:!0,cancelable:!0,detail:{facade:!0}})}function b(e){const t=e instanceof HTMLInputElement?e:e.querySelector("input");if(!t)throw new Error("facade directive requires an input element");return t}function y(e,t){const s=()=>{e.setSelectionRange(t,t)};s(),setTimeout(s(),1)}function h(e,t,{emit:s=!0,force:a=!1,clean:i=!1}={}){const{config:n}=e[c];let{oldValue:r}=e[c],o=t&&t.props?t.props.value:e.value;if(a||r!==o){const u=new E(n).clean(i&&!n.reverseFill);let m=u.format(o),p=u.clean(!n.reverseFill).unformat(o);return i&&(Number(n.max)&&p>Number(n.max)?(m=u.format(n.max),p=u.unformat(n.max)):Number(n.min)&&p<Number(n.min)&&(m=u.format(n.min),p=u.unformat(n.min))),e[c].oldValue=m,e.unmaskedValue=p,e.value!==m&&(e.value=m),s&&e.dispatchEvent(V())}}function C(e){const{target:t,detail:s}=e;if(s!=null&&s.facade)return!1;e.stopPropagation();let a=t.value.length-t.selectionEnd;const{oldValue:i,config:n}=t[c];h(t,null,{emit:!1}),a=Math.max(a,n.suffix.length),a=t.value.length-a,a=Math.max(a,n.prefix.length),y(t,a),i!==t.value&&t.dispatchEvent(V())}function j(e){const{target:t,detail:s}=e;if(s!=null&&s.facade)return!1;const{oldValue:a}=t[c];h(t,null,{force:!0,emit:!0,clean:!0}),a!==t.value&&t.dispatchEvent(O())}const f=c;var F={beforeMount:(e,{value:t,modifiers:s},a)=>{e=b(e);const i=Object.assign({},N(d),t,s);e[f]={config:i},h(e,a,{force:i.prefill,clean:!0})},mounted:e=>{e=b(e);const t=e[f],{config:s}=t,a=e.parentElement||e,i=n=>{n.target===e&&C(n)};a.addEventListener("input",i,!0),e.onblur=n=>j(n),e.onkeydown=n=>{if(([110,190].includes(n.keyCode)||n.key===s.decimal)&&e.value.includes(s.decimal))n.preventDefault();else if([8].includes(n.keyCode)){const r=e.value.slice(e.selectionEnd-1,e.selectionEnd),o=e.value.slice(e.selectionEnd-2,e.selectionEnd);if(r===s.separator){n.preventDefault();let u=e.value.length-e.selectionEnd;e.value=e.value.replace(o,""),u=Math.max(u,s.suffix.length),u=e.value.length-u,u=Math.max(u,s.prefix.length),y(e,u),e.dispatchEvent(new Event("input"))}else[s.prefix,"-"].includes(r)&&(n.preventDefault(),e.value="",e.dispatchEvent(new Event("input")))}},t.cleanup=()=>a.removeEventListener("input",i,!0)},updated:(e,{value:t,oldValue:s,modifiers:a},i)=>{if(e=b(e),t!==s){const{config:n}=e[f];e[f].config=Object.assign({},n,t,a),h(e,i,{force:!0,clean:!0})}else h(e,i)},unmounted:e=>{b(e)[f].cleanup()}};const l=N(d);var g={name:"Number",props:{modelValue:{required:!0},nullValue:{type:[Number,String],default:()=>l.nullValue},masked:{type:Boolean,default:!1},reverseFill:{type:Boolean,default:l.reverseFill},prefill:{type:Boolean,default:l.prefill},precision:{type:Number,default:()=>l.precision},minimumFractionDigits:{type:[Number,Boolean],default:()=>l.minimumFractionDigits},decimal:{type:String,default:()=>l.decimal},min:{type:[Number,Boolean],default:()=>l.min},max:{type:[Number,Boolean],default:()=>l.max},separator:{type:String,default:()=>l.separator},prefix:{type:String,default:()=>l.prefix},suffix:{type:String,default:()=>l.suffix}},directives:{number:F},emits:["update:model-value","input:model-value"],data(){return{maskedValue:this.modelValue,unmaskedValue:null}},methods:{input({target:e}){this.maskedValue=e.value,this.unmaskedValue=e.unmaskedValue,this.$emit("input:model-value",this.emittedValue)},change(){this.$emit("update:model-value",this.emittedValue)}},computed:{emittedValue(){return this.masked?this.maskedValue:this.unmaskedValue},config(){const e={};return Object.keys(this.$props).filter(t=>t!=="modelValue").forEach(t=>{e[t]=this.$props[t]}),e}},watch:{modelValue(e){this.unmaskedValue!==e&&(this.maskedValue=e)}}};const $=["value"];function M(e,t,s,a,i,n){const r=S("number");return w((v(),x("input",{type:"text",autocomplete:"off",value:i.maskedValue,onChange:t[0]||(t[0]=(...o)=>n.change&&n.change(...o)),onInput:t[1]||(t[1]=(...o)=>n.input&&n.input(...o)),class:"v-number"},null,40,$)),[[r,n.config]])}g.render=M;g.__file="src/component.vue";const B={install(e,t={}){t&&Object.assign(d,t),e.directive("number",F),e.component("number",g)}};typeof window!="undefined"&&window.Vue&&window.Vue.use(B);const I={name:"NumberFormat",props:["amount"],data(){return{total:0,number:void 0}},created(){this.number=new E(this.DataStore.money_config),this.total=this.number.format(this.amount)},watch:{amount(e,t){this.total=this.number.format(e)}},setup(){return{DataStore:_()}}};function R(e,t,s,a,i,n){return v(),x("span",null,D(i.total),1)}var H=k(I,[["render",R]]);export{H as default};

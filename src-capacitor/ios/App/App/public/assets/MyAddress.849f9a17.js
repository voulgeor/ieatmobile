import{_ as q,m as v,a0 as w,n as i,p as S,q as d,t as f,u as s,k as a,U as u,aa as p,V as n,a8 as m,R as h,Q as g,ad as $,ae as D,F as _,S as C,v as I,X as T,ai as L,aq as R,ar as B,b0 as P}from"./index.dd7e00fb.js";import{Q as V}from"./QToolbarTitle.b1bd964d.js";import{Q as z}from"./QToolbar.8b195103.js";import{Q as x}from"./QHeader.29791060.js";import{Q as E}from"./QInnerLoading.9112f444.js";import{Q as k}from"./QItemLabel.a9f52d7c.js";import{Q as F}from"./QSlideItem.6db583fd.js";import{Q as M}from"./QList.0d28954b.js";import{Q as N}from"./QFooter.5a3eddb3.js";import{Q as O}from"./QPage.d286c01b.js";import{Q as H}from"./QPullToRefresh.ec622f6c.js";import{u as U}from"./ClientStore.8c7f4eb4.js";import"./QResizeObserver.e43a870f.js";import"./use-cache.b0833c75.js";import"./touch.70a9dd44.js";import"./selection.3817dd43.js";import"./format.2a3572e1.js";const X={name:"MyAddress",components:{AddressDetails:v(()=>I(()=>import("./AddressDetails.5e96d447.js"),["assets/AddressDetails.5e96d447.js","assets/index.dd7e00fb.js","assets/index.f7829e99.css","assets/QToolbarTitle.b1bd964d.js","assets/QToolbar.8b195103.js","assets/QPopupEdit.ad06811d.js","assets/QSelect.787a612b.js","assets/QChip.e6b8778e.js","assets/QItemLabel.a9f52d7c.js","assets/selection.3817dd43.js","assets/rtl.4b414a6d.js","assets/format.2a3572e1.js","assets/QSpace.f419decb.js","assets/QBtnToggle.6edbf58b.js","assets/QFooter.5a3eddb3.js","assets/QResizeObserver.e43a870f.js","assets/QForm.2f2766d7.js","assets/ClosePopup.84104152.js","assets/index.f25f8a6a.js","assets/MapStore.00c2146b.js"]))},data(){return{data:[],loading:!1,inner_loading:!1,location_data:[]}},setup(){const e=w(),t=U();return{DataStore:e,ClientStore:t}},computed:{hasData(){return this.data.length>0}},created(){this.getAddresses()},methods:{deleteAdress(e,t){this.deleteAddress(t.address_uuid,e)},refresh(e){this.getAddresses(e)},getAddresses(e){i.empty(e)&&(this.loading=!0),i.getAddresses().then(t=>{this.data=t.details.data}).catch(t=>{this.data=[]}).then(t=>{this.loading=!1,i.empty(e)||e()})},deleteAddress(e,t){this.inner_loading=!0,i.deleteAddress(e).then(c=>{this.data.splice(t,1),this.ClientStore.getAddress()}).catch(c=>{i.notify("negative",c,"error_outline",this.$q)}).then(c=>{this.inner_loading=!1})},editAddress(e){console.debug(e),this.$refs.address_details.location_data=e,this.$refs.address_details.showModal()},afterSaveaddress(){console.debug("afterSaveaddress"),this.getAddresses()}}},Y={key:1,class:"full-width text-center"},j={class:"text-h5 text-weight-bold line-normal"},G={class:"text-grey font12 no-margin"},J={class:"text-weight-medium"};function K(e,t,c,b,l,r){const y=S("AddressDetails");return d(),f(H,{onRefresh:r.refresh},{default:s(()=>[a(x,{reveal:"","reveal-offset":"50",class:m({"bg-mydark text-white":e.$q.dark.mode,"bg-grey-1 text-dark":!e.$q.dark.mode})},{default:s(()=>[a(z,null,{default:s(()=>[a(u,{onClick:t[0]||(t[0]=o=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",class:"q-mr-sm",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),a(V,{class:"text-weight-bold"},{default:s(()=>[p(n(e.$t("Address")),1)]),_:1})]),_:1})]),_:1},8,["class"]),a(O,{padding:"",class:m(["q-pl-md q-pr-md",{"flex flex-center":!r.hasData&&!l.loading,"row items-stretch ":r.hasData&&!l.loading,"bg-mydark text-white":e.$q.dark.mode,"bg-grey-1 text-dark":!e.$q.dark.mode}])},{default:s(()=>[l.loading?(d(),f(E,{key:0,showing:!0,color:"primary",size:"md","label-class":"dark",class:"transparent"})):!r.hasData&&!l.loading?(d(),h("div",Y,[g("div",j,n(e.$t("You don't have address added yet")),1),g("p",G,n(e.$t("Let's change that!")),1),a(u,{flat:"",color:"blue","no-caps":"",label:e.$t("Add new address"),dense:"",size:"sm",to:{path:"/location/map",query:{url:"/account/my-address"}}},null,8,["label"])])):(d(),h(_,{key:2},[a($,{flat:"",class:m(["radius8 col-12",{"bg-mydark ":e.$q.dark.mode,"bg-white ":!e.$q.dark.mode}])},{default:s(()=>[a(D,null,{default:s(()=>[a(M,null,{default:s(()=>[(d(!0),h(_,null,C(l.data,(o,A)=>(d(),f(T,{key:o.address_uuid,appear:"","leave-active-class":"animated fadeOut"},{default:s(()=>[a(F,{onAction:Q=>r.deleteAdress(A,o),"right-color":e.$q.dark.mode?"mydark":"white",class:m({"bg-mydark ":e.$q.dark.mode,"bg-white ":!e.$q.dark.mode})},{right:s(()=>[a(u,{unelevated:"",round:"",color:"lightprimary","text-color":"primary",icon:"las la-trash",dense:""})]),default:s(()=>[L((d(),f(B,{onClick:Q=>r.editAddress(o),clickable:"",class:m(["radius10 q-mb-sm",{"border-grey300 ":e.$q.dark.mode,"border-grey":!e.$q.dark.mode}])},{default:s(()=>[a(P,{top:""},{default:s(()=>[a(k,{lines:"1"},{default:s(()=>[g("span",J,n(o.attributes.address_label),1)]),_:2},1024),a(k,{caption:"",lines:"1"},{default:s(()=>[p(n(o.address.formatted_address),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick","class"])),[[R]])]),_:2},1032,["onAction","right-color","class"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["class"]),a(N,{reveal:"",class:"bg-grey-1 q-pl-md q-pr-md q-pb-sm q-pt-sm text-dark"},{default:s(()=>[a(u,{loading:l.loading,to:{path:"/location/map",query:{url:"/account/my-address"}},label:e.$t("Add new address"),unelevated:"","no-caps":"",color:"primary text-white",class:"full-width text-weight-bold",size:"lg"},null,8,["loading","label"])]),_:1})],64)),a(y,{ref:"address_details",maps_config:b.DataStore.maps_config,onAfterSaveaddress:r.afterSaveaddress},null,8,["maps_config","onAfterSaveaddress"])]),_:1},8,["class"])]),_:1},8,["onRefresh"])}var ge=q(X,[["render",K]]);export{ge as default};
